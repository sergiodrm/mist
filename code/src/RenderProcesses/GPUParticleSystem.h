// Autogenerated code for Mist project
// Header file

#pragma once
#include "Shader.h"
#include "Globals.h"
#include "VulkanBuffer.h"
#include "RenderAPI.h"
#include <glm/glm.hpp>

namespace Mist
{
	class ComputeShader;
	class RenderFrameContext;

	struct Particle
	{
		glm::vec2 Position;
		glm::vec2 Velocity;
		glm::vec4 Color;
	};

	class GPUParticleSystem
	{
	public:

		void Init(const RenderContext& context);
		void InitFrameData(const RenderContext& context, RenderFrameContext* frameContextArray);
		void Dispatch(CommandBuffer cmd, uint32_t frameIndex);
		void Destroy(const RenderContext& context);

	private:
		ComputeShader* m_shader;
		AllocatedBuffer m_ssboArray[globals::MaxOverlappedFrames];
		VkDescriptorSet m_ssboDescriptorArray[globals::MaxOverlappedFrames];
	};
}
